def apply_sma_strategy(data, short_window=20, long_window=50):
    """
    Apply a simple moving average crossover strategy.

    :param data: DataFrame with stock data
    :param short_window: Period for short-term SMA
    :param long_window: Period for long-term SMA
    :return: DataFrame with signals and strategy performance
    """
    df = data.copy()
    df['SMA_short'] = df['Close'].rolling(window=short_window).mean()
    df['SMA_long'] = df['Close'].rolling(window=long_window).mean()

    # Signal: 1 means 'long' (buy), -1 means 'short' (sell or no position)
    df['Signal'] = 0
    df.loc[df['SMA_short'] > df['SMA_long'], 'Signal'] = 1    # Long position (buy)
    df.loc[df['SMA_short'] < df['SMA_long'], 'Signal'] = -1   # Short position (sell)

    df['Return'] = df['Close'].pct_change()
    # Strategy return = daily return * position of previous day (shift(1))
    df['Strategy_Return'] = df['Signal'].shift(1) * df['Return']

    return df.dropna()
    print("Stock data sorted and displayed successfully.")  